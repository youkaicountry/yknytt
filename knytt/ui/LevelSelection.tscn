[gd_scene load_steps=10 format=3 uid="uid://drrhqjsmcawxg"]

[ext_resource type="Script" path="res://knytt/ui/FileHTTPRequest.cs" id="1"]
[ext_resource type="PackedScene" uid="uid://caf8l6kno8arw" path="res://knytt/ui/GDKnyttDropdown.tscn" id="2"]
[ext_resource type="FontFile" uid="uid://c8pvk1egdqlmd" path="res://knytt/ui/UIDynamicFont.tres" id="3"]
[ext_resource type="PackedScene" uid="uid://crp5k3eycfjv7" path="res://knytt/ui/GDKnyttButton.tscn" id="4"]
[ext_resource type="Script" path="res://knytt/ui/LevelSelection.cs" id="5"]
[ext_resource type="Script" path="res://knytt/ui/GameContainer.cs" id="6"]
[ext_resource type="PackedScene" path="res://knytt/ui/stats/RateHTTPRequest.tscn" id="7"]

[sub_resource type="StyleBoxFlat" id="1"]
content_margin_left = 3.0
bg_color = Color(1, 1, 1, 0)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0.588235, 0.588235, 0.588235, 1)

[sub_resource type="StyleBoxFlat" id="2"]
bg_color = Color(1, 1, 1, 1)

[node name="LevelSelection" type="CanvasLayer"]
script = ExtResource("5")

[node name="BackgroundRect" type="ColorRect" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0

[node name="MainContainer" type="VBoxContainer" parent="."]
anchors_preset = 13
anchor_left = 0.5
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -296.0
offset_right = 294.0
offset_bottom = -10.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ScrollContainer" type="ScrollContainer" parent="MainContainer"]
custom_minimum_size = Vector2(0, 190)
layout_mode = 2
size_flags_vertical = 3
follow_focus = true

[node name="GameContainer" type="VBoxContainer" parent="MainContainer/ScrollContainer"]
layout_mode = 2
script = ExtResource("6")

[node name="FilterContainer" type="HBoxContainer" parent="MainContainer"]
layout_mode = 2

[node name="Category" type="VBoxContainer" parent="MainContainer/FilterContainer"]
layout_mode = 2

[node name="CategoryLabel" type="Label" parent="MainContainer/FilterContainer/Category"]
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("3")
theme_override_font_sizes/font_size = 12
text = "Category:"

[node name="CategoryDropdown" parent="MainContainer/FilterContainer/Category" instance=ExtResource("2")]
custom_minimum_size = Vector2(100, 0)
layout_mode = 2
alignment = 1
item_count = 8
selected = 0
popup/item_0/text = "[All]"
popup/item_0/id = 0
popup/item_1/text = "Tutorial"
popup/item_1/id = 1
popup/item_2/text = "Challenge"
popup/item_2/id = 2
popup/item_3/text = "Puzzle"
popup/item_3/id = 3
popup/item_4/text = "Maze"
popup/item_4/id = 4
popup/item_5/text = "Environmental"
popup/item_5/id = 5
popup/item_6/text = "Playground"
popup/item_6/id = 6
popup/item_7/text = "Misc"
popup/item_7/id = 7

[node name="Difficulty" type="VBoxContainer" parent="MainContainer/FilterContainer"]
layout_mode = 2

[node name="DifficultyLabel" type="Label" parent="MainContainer/FilterContainer/Difficulty"]
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("3")
theme_override_font_sizes/font_size = 12
text = "Difficulty:"

[node name="DifficultyDropdown" parent="MainContainer/FilterContainer/Difficulty" instance=ExtResource("2")]
custom_minimum_size = Vector2(80, 0)
layout_mode = 2
alignment = 1
item_count = 6
selected = 0
popup/item_0/text = "[All]"
popup/item_0/id = 0
popup/item_1/text = "Easy"
popup/item_1/id = 1
popup/item_2/text = "Normal"
popup/item_2/id = 2
popup/item_3/text = "Hard"
popup/item_3/id = 3
popup/item_4/text = "Very Hard"
popup/item_4/id = 4
popup/item_5/text = "Lunatic"
popup/item_5/id = 5

[node name="Size" type="VBoxContainer" parent="MainContainer/FilterContainer"]
layout_mode = 2

[node name="SizeLabel" type="Label" parent="MainContainer/FilterContainer/Size"]
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("3")
theme_override_font_sizes/font_size = 12
text = "Size:"

[node name="SizeDropdown" parent="MainContainer/FilterContainer/Size" instance=ExtResource("2")]
custom_minimum_size = Vector2(80, 0)
layout_mode = 2
alignment = 1
item_count = 4
selected = 0
popup/item_0/text = "[All]"
popup/item_0/id = 0
popup/item_1/text = "Small"
popup/item_1/id = 1
popup/item_2/text = "Medium"
popup/item_2/id = 2
popup/item_3/text = "Large"
popup/item_3/id = 3

[node name="Sort" type="VBoxContainer" parent="MainContainer/FilterContainer"]
layout_mode = 2

[node name="SortLabel" type="Label" parent="MainContainer/FilterContainer/Sort"]
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("3")
theme_override_font_sizes/font_size = 12
text = "Sort by:"

[node name="SortDropdown" parent="MainContainer/FilterContainer/Sort" instance=ExtResource("2")]
custom_minimum_size = Vector2(90, 0)
layout_mode = 2
alignment = 1
item_count = 5
selected = 0
popup/item_0/text = "[Default]"
popup/item_0/id = 0
popup/item_1/text = "Last Played"
popup/item_1/id = 1
popup/item_2/text = "Last Installed"
popup/item_2/id = 2
popup/item_3/text = "Name"
popup/item_3/id = 3
popup/item_4/text = "Author"
popup/item_4/id = 4

[node name="RemoteSortDropdown" parent="MainContainer/FilterContainer/Sort" instance=ExtResource("2")]
visible = false
custom_minimum_size = Vector2(90, 0)
layout_mode = 2
alignment = 1
item_count = 5
selected = 0
popup/item_0/text = "Downloads"
popup/item_0/id = 5
popup/item_1/text = "Upvotes"
popup/item_1/id = 6
popup/item_2/text = "Name"
popup/item_2/id = 3
popup/item_3/text = "Author"
popup/item_3/id = 4
popup/item_4/text = "File Size"
popup/item_4/id = 7

[node name="Search" type="VBoxContainer" parent="MainContainer/FilterContainer"]
layout_mode = 2
theme_override_constants/separation = 6

[node name="SearchLabel" type="Label" parent="MainContainer/FilterContainer/Search"]
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("3")
theme_override_font_sizes/font_size = 12
text = "Search:"

[node name="SearchEdit" type="LineEdit" parent="MainContainer/FilterContainer/Search"]
custom_minimum_size = Vector2(120, 15)
layout_mode = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("3")
theme_override_font_sizes/font_size = 12
theme_override_styles/normal = SubResource("1")
caret_blink = true

[node name="BackButton" parent="." instance=ExtResource("4")]
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -85.3687
offset_top = -25.4749
offset_right = -5.36865
offset_bottom = -6.26004
text = "Back"

[node name="RestHTTPRequest" type="HTTPRequest" parent="."]

[node name="FileHTTPRequest" type="HTTPRequest" parent="."]
script = ExtResource("1")

[node name="DownloadMonitor" type="Timer" parent="."]
wait_time = 0.25

[node name="ConnectionLostLabel" type="Label" parent="."]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = -50.0
theme_override_colors/font_color = Color(1, 0, 0, 1)
theme_override_fonts/font = ExtResource("3")
theme_override_font_sizes/font_size = 12
theme_override_styles/normal = SubResource("2")
text = "Cannot connect to the server"

[node name="RateHTTPRequest" parent="." instance=ExtResource("7")]

[node name="SearchEditTimer" type="Timer" parent="."]
wait_time = 0.5
one_shot = true

[connection signal="item_selected" from="MainContainer/FilterContainer/Category/CategoryDropdown" to="." method="_on_CategoryDropdown_item_selected"]
[connection signal="item_selected" from="MainContainer/FilterContainer/Difficulty/DifficultyDropdown" to="." method="_on_DifficultyDropdown_item_selected"]
[connection signal="item_selected" from="MainContainer/FilterContainer/Size/SizeDropdown" to="." method="_on_SizeDropdown_item_selected"]
[connection signal="item_selected" from="MainContainer/FilterContainer/Sort/SortDropdown" to="." method="_on_SortDropdown_item_selected"]
[connection signal="item_selected" from="MainContainer/FilterContainer/Sort/RemoteSortDropdown" to="." method="_on_RemoteSortDropdown_item_selected"]
[connection signal="text_changed" from="MainContainer/FilterContainer/Search/SearchEdit" to="." method="_on_SearchEdit_text_changed"]
[connection signal="text_submitted" from="MainContainer/FilterContainer/Search/SearchEdit" to="." method="_on_SearchEdit_text_entered"]
[connection signal="pressed" from="BackButton" to="." method="_on_BackButton_pressed"]
[connection signal="request_completed" from="RestHTTPRequest" to="." method="_on_HTTPRequest_request_completed"]
[connection signal="request_completed" from="FileHTTPRequest" to="." method="_on_FileHTTPRequest_request_completed"]
[connection signal="timeout" from="DownloadMonitor" to="." method="_on_DownloadMonitor_timeout"]
[connection signal="timeout" from="SearchEditTimer" to="." method="_on_SearchEditTimer_timeout"]
